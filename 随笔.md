### new 一个构造函数发生了什么

```javascript
function SayHello(msg) {
  this.msg = msg;
  this.print = function() {
    console.log(this.msg);
  };
}

let hello = new SayHello('hello world');
```

上面创建构造函数。并用 new 运算符实例化了一个 hello,主要经历了一下四个步骤

```javascript
let obj = {};
obj.__proto__ = SayHello.prototype;
let res = SayHello.call(obj);
return obj;
```

1. 创建一个空对象obj
2. 将obj的__proto__指向构造函数对象prototype，此时obj的原型链是obj.__proto__ -> SayHello.prototype.__proto__ -> Object.prototype.__proto__ -> null
3. 将构造函数SayHello的作用域赋给新对象，在obj的上下文中调用SayHello()这个函数
4. 返回obj这个对象
